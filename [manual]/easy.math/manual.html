<!DOCTYPE html>
<html lang="ru">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <link type="text/css" rel="stylesheet" href="../res/css/easy.library.css" />
  <title>Easy Math — Руководство</title>
</head>

<body>
  <div class="avs-page-wrapper">
        <div class="easy-lib-page">
            <article class="e-block">
                <a class="avs-article-h1__link" href="https://github.com/AleksVersus/easy.math.3/releases" id="UP" target="_blank" title="Скачать последнюю версию библиотеки со страницы релизов">
                    <h1 class="avs-article-h1">easy.math.qsp v. 3.0.0</h1>
                </a>
    <p class="avs-articles-underhead">Библиотека математических функций для <a class="avs-page-external-link" href="https://qsp.org" target="_blank">Quest Soft Player</a></p>
      <p class="avs-article-p">
        Разрабатывалась для плееров версий 5.8.0 — это: <a class="avs-page-external-link" href="https://qsp.su/index.php?option=com_content&view=article&id=64&Itemid=87">классический плеер</a> версии 5.8.0 и <a class="avs-page-external-link" href="https://github.com/QSPFoundation/qspider">qSpider</a> версии 0.0.12 и выше. Не гарантируется правильная работа на плеерах иных версий. Некоторые функции имеют ограничения на значение числовых аргументов, это связано с используемыми плеером библиотеками. Для разных версий плеера могут быть разные ограничения, поэтому внимательно читайте документацию к плееру, под который разрабатываете игру.
      </p>
      <p class="avs-article-p">
        Существует ветка <a class="avs-page-external-link" href="http://aleksversus.narod.ru/index/easy_math_qsp/0-56" target="_blank">2.x.x</a> библиотеки для плееров версии 5.7.0. Она может использоваться и на плеерах версии 5.8.0 при некоторой доработке, но библиотека ветки 3.x.x в плеерах версии 5.8.0 работает эффективнее.
      </p>
      <div>
        По всем вопросам и предложениям обращаться:
        <ul>
          <li>aleksversus@mail.ru</li>
          <li>Вконтакте: <a class="avs-page-external-link" href="https://vk.com/id40090736" class="emHREFHH" target="_blank">id40090736</a></li>
        </ul>
        Изначально библиотека создавалась для обеспечения нужд игры <a class="avs-page-external-link" href="http://aleksversus.narod.ru/index/magicon_fb/0-65" target="_blank" class="emHREFHH">МАГИКОН</a>.
      </div>
      <div style="margin:1em auto;">
        Поддержать проект можно, подписавшись на Boosty: <a class="avs-page-external-link" href="https://boosty.to/aleksversus">aleksversus</a>.
      </div>
      <h2 class="avs-article-h2">Подключение и использование</h2>
      <p class="avs-article-p">Предполагается, что Вы читали <a class="avs-page-external-link" href="http://wiki.qsp.su/" target="new">справку по QSP</a>, пробовали писать игры и уже знаете, что такое локации, подпрограммы (процедуры) и функции, чем отличаются текстовые и числовые переменные, что такое аргументы и для чего они нужны.</p>
      <p class="avs-article-p">Чтобы использовать функции библиотеки при написании своей игры, сделайте следующее:</p>
      <ol class="em_LI">
        <li>
          <p class="avs-article-p">
            скачайте архив с библиотекой <a class="avs-page-external-link" href="https://github.com/AleksVersus/easy.math.3/releases/" title="Скачать последнюю версию библиотеки со страницы релизов" target="_blank">со страницы релизов</a>, и распакуйте в папку, где лежит ваша игра. В папке с вашей игрой должна появиться папка <span class="emFOLD">"lib"</span>.
          </p>
        </li>
        <li>
          <p class="avs-article-p">В своей игре на самой первой локации, в поле "выполнить при посещении" введите</p>
          <div class="Monokai-Code">
            <span class="Monokai-Operator">inclib</span>&nbsp;<span class="Monokai-String">'lib\easy.math.qsp'</span>
          </div>
        </li>
        <li>
          <p class="avs-article-p">теперь Вы можете пользоваться функциями библиотеки.</p>
        </li>
      </ol>
      <p class="avs-article-p">Все функции библиотеки вызываются с помощью ключевого слова
        <span class="emFUNC">FUNC</span>( ) - для получения числовых значений, и
        <span class="emFUNC">$FUNC</span>( ) - для получения текстовых значений.
      </p>
      <p class="avs-article-p">Исключением являются функции, результат которых записывается в массив. Такие функции вызываются оператором <span class="emOPRT">GOSUB</span>, или <span class="emOPRT">GS</span>.</p>
      <div class="Monokai-Code">
        <span class="Monokai-Func">$FUNC</span>(<span class="Monokai-String">'em.foo'</span>,<span class="Monokai-SysVar">&lt;аргумент_<span class="Monokai-Numeric">0</span>&gt;</span>,<span class="Monokai-SysVar">&lt;аргумент_<span class="Monokai-Numeric">1</span>&gt;</span>,<span class="Monokai-SysVar">&lt;аргумент_<span class="Monokai-Numeric">2</span>&gt;</span>,<span class="Monokai-SysVar">&lt;аргумент_<span class="Monokai-Numeric">3</span>&gt;</span>,<span class="Monokai-SysVar">&lt;аргумент_<span class="Monokai-Numeric">4</span>&gt;</span>)
      </div>
      <p class="avs-article-p">Аргументы могут быть текстовыми или числовыми в зависимости от требований и назначения функции.</p>
      <p class="avs-article-p">Можно использовать неявный вызов функций, если вам так удобнее. Функции, которые явно вызываются через <span class="emOPRT">GOSUB</span>, не вернут результат даже при неявном вызове.</p>
      <div class="Monokai-Code">
        <span class="Monokai-UnFunc">@em.foo</span>(<span class="Monokai-SysVar">&lt;аргумент_<span class="Monokai-Numeric">0</span>&gt;</span>,<span class="Monokai-SysVar">&lt;аргумент_<span class="Monokai-Numeric">1</span>&gt;</span>,<span class="Monokai-SysVar">&lt;аргумент_<span class="Monokai-Numeric">2</span>&gt;</span>,<span class="Monokai-SysVar">&lt;аргумент_<span class="Monokai-Numeric">3</span>&gt;</span>,<span class="Monokai-SysVar">&lt;аргумент_<span class="Monokai-Numeric">4</span>&gt;</span>)
      </div>
      <p class="avs-article-p">Далее все примеры будут писаться для варианта с неявным вызовом.</p>
      <p class="avs-article-p">Библиотека работает с переменными, имена которых включают префиксы, соответствующие названиям локаций, чтобы избежать пересечений с именами переменных, которые Вы используете в своих играх. Если функция может принимать в качестве аргумента имя переменной/массива, удостоверьтесь, что значения локальных переменных в этой функии не перекроют передаваемые вами значения.</p>
      <p class="avs-article-p">Все переменные, использующиеся функциями, после - уничтожаются.</p>
      <p class="avs-article-p">Если результат работы функции помещается в массив, одним из параметров функции указывается имя массива, в который должен быть помещён результат. Имена массивов, передаваемые в аргументах функций, должны записываться по общим правилам записи имён переменных для плеера: текстовые массивы - с символом <span class="emTEXT">$</span> перед именем, числовые - без символа <span class="emTEXT">$</span> перед именем. Само имя не должно содержать символа <span class="emTEXT">$</span>, и других запрещённых символов.</p>
      <p class="avs-article-p">В руководстве приводятся примеры с результатами работы функции. Некоторые из таких примеров не являются валидным кодом QSP, и служат лишь для демонстрации вызова функций и результата, который они вернут. Чтобы превратить данные примеры в валидный код QSP, необходимо закомментировать часть с представленным результатом.</p>
      <div style="width:100%;display:flex;">
        <div class="Monokai-Code" style="margin-right:0.2em;max-width:50%;">
          <span class="Monokai-Comment">! не валидный код QSP</span><br>
          <span class="Monokai-UnFunc">@em.zero</span>(<span class="Monokai-Numeric">13</span>)<span class="Monokai-Assign">=</span><span class="Monokai-String">'0000000000000'</span><br>
          <span class="Monokai-UnFunc">@em.zero</span>(<span class="Monokai-Numeric">13</span>,<span class="Monokai-String">'1'</span>)<span class="Monokai-Assign">=</span><span class="Monokai-String">'1111111111111'</span><br>
          <span class="Monokai-UnFunc">@em.zero</span>(<span class="Monokai-Numeric">13</span>,<span class="Monokai-String">'10'</span>)<span class="Monokai-Assign">=</span><span class="Monokai-String">'10101010101010101010101010'</span><br>
          <span class="Monokai-UnFunc">@em.zero</span>(<span class="Monokai-Numeric">13</span>,<span class="Monokai-String">'a'</span>)<span class="Monokai-Assign">=</span><span class="Monokai-String">'aaaaaaaaaaaaa'</span><br>
          <span class="Monokai-UnFunc">@em.zero</span>(<span class="Monokai-Numeric">3</span>,<span class="Monokai-String">'bla'</span>)<span class="Monokai-Assign">=</span><span class="Monokai-String">'blablabla'</span>
        </div>
        <div class="Monokai-Code" style="margin-left:0.2em;max-width:50%;">
          <span class="Monokai-Comment">! валидный код QSP</span><br>
          <span class="Monokai-UnFunc">@em.zero</span>(<span class="Monokai-Numeric">13</span>)&nbsp;<span class="Monokai-Operator">&amp;</span>&nbsp;<span class="Monokai-Comment">!&nbsp;='0000000000000'</span><br>
          <span class="Monokai-UnFunc">@em.zero</span>(<span class="Monokai-Numeric">13</span>,<span class="Monokai-String">'1'</span>)&nbsp;<span class="Monokai-Operator">&amp;</span>&nbsp;<span class="Monokai-Comment">!&nbsp;='1111111111111'</span><br>
          <span class="Monokai-UnFunc">@em.zero</span>(<span class="Monokai-Numeric">13</span>,<span class="Monokai-String">'10'</span>)&nbsp;<span class="Monokai-Operator">&amp;</span>&nbsp;<span class="Monokai-Comment">!&nbsp;='10101010101010101010101010'</span><br>
          <span class="Monokai-UnFunc">@em.zero</span>(<span class="Monokai-Numeric">13</span>,<span class="Monokai-String">'a'</span>)&nbsp;<span class="Monokai-Operator">&amp;</span>&nbsp;<span class="Monokai-Comment">!&nbsp;='aaaaaaaaaaaaa'</span><br>
          <span class="Monokai-UnFunc">@em.zero</span>(<span class="Monokai-Numeric">3</span>,<span class="Monokai-String">'bla'</span>)&nbsp;<span class="Monokai-Operator">&amp;</span>&nbsp;<span class="Monokai-Comment">!&nbsp;='blablabla'</span>
        </div>
      </div>
      <h2 class="avs-article-h2">История версий</h2>
      <!-- История версий -->
      <p class="avs-article-p"><a class="avs-page-external-link" href="istorija_versij/0-83.html" title="История версий отдельной страницей">Просмотреть историю версий</a></p>
      <!-- История версий -->
      <h2 class="avs-article-h2">Функции</h2>
      <ol>
        <li>
          <a id="supporting"></a>
          <h3 class="avs-article-h3">Вспомогательные функции</h3>
          <ul>
            <li><a class="avs-page-internal-link" href="vspomogatelnye_funkcii/0-74.html#em_str_getword">em.str.getWord</a> - из строки вида <span class="emTEXT">aaa|bbb|ccc|...|yyy|zzz</span> вычленяется подстрока, стоящая в указанной позиции.</li>
            <li><a class="avs-page-internal-link" href="vspomogatelnye_funkcii/0-74.html#em_tag_getnum">em.tag.getNum</a> - получает значение одиночного тега.</li>
            <li><a class="avs-page-internal-link" href="vspomogatelnye_funkcii/0-74.html#em_tag_getcont">em.tag.getCont</a> - получает значение сдвоенного тега.</li>
            <li><a class="avs-page-internal-link" href="vspomogatelnye_funkcii/0-74.html#em_maxvar">em.maxVar</a> - поиск названия переменной среди перечисленных, которая содержит наибольшее значение.</li>
            <li><a class="avs-page-internal-link" href="vspomogatelnye_funkcii/0-74.html#em_minvar">em.minVar</a> - поиск названия переменной среди перечисленных, которая содержит наименьшее значение.</li>
            <li><a class="avs-page-internal-link" href="vspomogatelnye_funkcii/0-74.html#em_var_gettype">em.var.getType</a> - получение типа переменной.</li>
            <li><a class="avs-page-internal-link" href="vspomogatelnye_funkcii/0-74.html#rergb">em.deRGB</a> - получает составляющие цвета на основе числового кода цвета QSP.</li>
          </ul>
        </li>
        <li>
          <a id="floating"></a>
          <h3 class="avs-article-h3">Операции над вещественными (дробными) числами</h3>
          <ul>
            <li><a class="avs-page-internal-link" href="operacii_s_drobnymi_chislami/0-75.html#em_dz">em.dz</a> - отсечение нулей в дробной части числа</li>
            <li><a class="avs-page-internal-link" href="operacii_s_drobnymi_chislami/0-75.html#em_indiv">em.indiv</a> - рациональное частное от деления двух целых чисел</li>
            <li><a class="avs-page-internal-link" href="operacii_s_drobnymi_chislami/0-75.html#em_undiv">em.undiv</a> - превращает рациональное число в целое</li>
            <li><a class="avs-page-internal-link" href="operacii_s_drobnymi_chislami/0-75.html#em_divdigs">em.divdigs</a> - получает разрядность дробной части числа</li>
            <li><a class="avs-page-internal-link" href="operacii_s_drobnymi_chislami/0-75.html#em_round">em.round</a> - округляет рациональное число.</li>
            <li><a class="avs-page-internal-link" href="operacii_s_drobnymi_chislami/0-75.html#em_add">em.add</a> - вычисление суммы рациональных чисел.</li>
            <li><a class="avs-page-internal-link" href="operacii_s_drobnymi_chislami/0-75.html#em_mult">em.mult</a> - вычисление произведения рациональных чисел.</li>
            <li><a class="avs-page-internal-link" href="operacii_s_drobnymi_chislami/0-75.html#em_div">em.div</a> - вычисление частного от деления рациональных чисел.</li>
            <li><a class="avs-page-internal-link" href="operacii_s_drobnymi_chislami/0-75.html#em_simpl">em.simpl</a> - сравнение рациональных чисел.</li>
            <li><a class="avs-page-internal-link" href="operacii_s_drobnymi_chislami/0-75.html#em_sqrt">em.sqrt</a> - вычисление корня квадратного.</li>
          </ul>
        </li>
        <li>
          <a id="logical"></a>
          <h3 class="avs-article-h3">Логические операции</h3>
          <ul>
            <li><a class="avs-page-internal-link" href="logicheskie_operacii/0-76.html#em_byte_add">em.byte.add</a> - "логическое" сложение</li>
            <li><a class="avs-page-internal-link" href="logicheskie_operacii/0-76.html#em_byte_dev">em.byte.dev</a> - "логическое" вычитание</li>
          </ul>
        </li>
        <li>
          <a id="string"></a>
          <h3 class="avs-article-h3">Операции над текстом</h3>
          <ul>
            <li><a class="avs-page-internal-link" href="operacii_s_tekstom/0-77.html#em_zero">em.zero</a> - генерирует строку одинаковых символов</li>
            <li><a class="avs-page-internal-link" href="operacii_s_tekstom/0-77.html#em_str_random">em.str.random</a> - генерирует строку случайных символов</li>
            <li><a class="avs-page-internal-link" href="operacii_s_tekstom/0-77.html#em_arr_search">em.arr.search</a> - производит поиск элемента массива, содержащего строку, соответствующую регулярному выражению.</li>
            <li><a class="avs-page-internal-link" href="operacii_s_tekstom/0-77.html#em_str_inarr">em.str.inArr</a> - из блока текста выбирает все строки между указанными разделителями и помещает их в указанный массив.</li>
            <li><a class="avs-page-internal-link" href="operacii_s_tekstom/0-77.html#em_str_widetrim">em.str.widetrim</a> - удаление прилегающих пробелов, символов табуляции и переводов строк, или символов преформатирования.</li>
            <li><a class="avs-page-internal-link" href="operacii_s_tekstom/0-77.html#em_str_thin">em.str.thin</a> - разрежение строки строкой-разделителем.</li>
          </ul>
        </li>
        <li>
          <a id="heximal"></a>
          <h3 class="avs-article-h3">Операции над шестнадцатеричными числами</h3>
          <ul>
            <li><a class="avs-page-internal-link" href="operacii_s_shestnadcaterichnymi_chislami/0-78.html#em_hex_indec">em.hex.inDec</a> - перевод из шестнадцатеричной системы в десятеричную</li>
            <li><a class="avs-page-internal-link" href="operacii_s_shestnadcaterichnymi_chislami/0-78.html#em_dec_inhex">em.dec.inHex</a> - перевод из десятеричной системы в шестнадцатеричную</li>
            <li><a class="avs-page-internal-link" href="operacii_s_shestnadcaterichnymi_chislami/0-78.html#em_dec_incol">em.dec.inCol</a> - превращает десятеричное число в шестнадцатеричное</li>
            <li><a class="avs-page-internal-link" href="operacii_s_shestnadcaterichnymi_chislami/0-78.html#em_col_add">em.col.add</a> - изменение цвета, записанного в шестнадцатеричном RGB.</li>
            <li><a class="avs-page-internal-link" href="operacii_s_shestnadcaterichnymi_chislami/0-78.html#em_col_inrgb">em.col.inRGB</a> - преобразование цвета из формата RRGGBB в формат rgb понятный QSP.</li>
            <li><a class="avs-page-internal-link" href="operacii_s_shestnadcaterichnymi_chislami/0-78.html#em_col_inv">em.col.inv</a> - инвертирование цвета в формате RRGGBB, т.е. преобразование цвета к совершенно противоположному.</li>
          </ul>
        </li>
        <li>
          <a id="arrays"></a>
          <h3 class="avs-article-h3">Операции над массивами</h3>
          <ul>
            <!-- первая страница -->
            <li><a class="avs-page-internal-link" href="operacii_s_massivami/0-79.html#em_arr_print">em.arr.print</a> - вывод содержимого всех элементов массива в виде текста</li>
            <li><a class="avs-page-internal-link" href="operacii_s_massivami/0-79.html#em_fewarrs_print">em.fewArrs.print</a> - вывод содержимого нескольких массивов.</li>
            <li><a class="avs-page-internal-link" href="operacii_s_massivami/0-79.html#em_arr_insert">em.arr.insert</a> - вставка элемента в массив со сдвигом ячеек вправо.</li>
            <li><a class="avs-page-internal-link" href="operacii_s_massivami/0-79.html#em_arr_clear">em.arr.clear</a> - удаление всех элементов массива, соответствующих указанному значению.</li>
            <li><a class="avs-page-internal-link" href="operacii_s_massivami/0-79.html#em_arr_chtype">em.arr.chType</a> - изменение типа массива.</li>
            <!-- вторая страница -->
            <li><a class="avs-page-internal-link" href="operacii_s_massivami_stranica_2/0-80.html#em_arr_randFill">em.arr.randFill</a> - заполнение элементов массива случайными числами</li>
            <li><a class="avs-page-internal-link" href="operacii_s_massivami_stranica_2/0-80.html#em_arr_strtFill">em.arr.strtFill</a> - заполнение элементов массива подряд идущими числами.</li>
            <li><a class="avs-page-internal-link" href="operacii_s_massivami_stranica_2/0-80.html#em_arr_sort">em.arr.sort</a> - многофункциональная сортировка содержимого массива.</li>
            <li><a class="avs-page-internal-link" href="operacii_s_massivami_stranica_2/0-80.html#em_arr_restand">em.arr.restand</a> - перетасовка элементов массива в соответствии с таблицей перестановки.</li>
            <li><a class="avs-page-internal-link" href="operacii_s_massivami_stranica_2/0-80.html#em_arr_desort">em.arr.deSort</a> - операция обратная сортировке.</li>
            <li><a class="avs-page-internal-link" href="operacii_s_massivami_stranica_2/0-80.html#em_arr_simpl">em.arr.simpl</a> - сравнение содержимого двух массивов.</li>
            <li><a class="avs-page-internal-link" href="operacii_s_massivami_stranica_2/0-80.html#em_arr_find">em.arr.find</a> - поиск максимального или минимального значения числового массива по указанной области и в заданных пределах.</li>
          </ul>
        </li>
        <li>
          <a id="integer"></a>
          <h3 class="avs-article-h3">Операции над целыми числами</h3>
          <ul>
            <li><a class="avs-page-internal-link" href="operacii_s_celymi_chislami/0-81.html#em_even">em.even</a> - округление целых чисел до указанной разрядности</li>
            <li><a class="avs-page-internal-link" href="operacii_s_celymi_chislami/0-81.html#em_summ">em.summ</a> - подсчёт суммы всех элементов массива.</li>
            <li><a class="avs-page-internal-link" href="operacii_s_celymi_chislami/0-81.html#em_digs">em.digs</a> - получение разрядности целого числа</li>
            <li><a class="avs-page-internal-link" href="operacii_s_celymi_chislami/0-81.html#em_exp">em.exp</a> - возведение целого числа в степень.</li>
            <li><a class="avs-page-internal-link" href="operacii_s_celymi_chislami/0-81.html#em_abs">em.abs</a> - модуль от разности. <span class="em_BLCK">c=|a-b|</span></li>
            <li><a class="avs-page-internal-link" href="operacii_s_celymi_chislami/0-81.html#em_random">em.random</a> - случайное число в указанных промежутках.</li>
            <li><a class="avs-page-internal-link" href="operacii_s_celymi_chislami/0-81.html#em_log">em.log</a> - логарифмирование по указанному основанию.</li>
          </ul>
        </li>
        <li>
          <a id="coords"></a>
          <h3 class="avs-article-h3">Работа с координатной сеткой</h3>
          <ul class="emLI">
            <li><a class="avs-page-internal-link" href="rabota_s_koordinatnoj_setkoj/0-82.html#em_map_cell_getcoords">em.map.cell.getCoords</a> - определяет координаты ячейки по текущему номеру ячейки.</li>
          </ul>
        </li>
      </ol>
      <h2 class="avs-article-h2">Перспективы</h2>
      <p class="avs-article-p">
        Библиотека будет пополняться новыми функциями по мере необходимости, и если существование функции хоть как-то оправдано. Некоторые функции на сегодняшний день сделать невозможно - они будут либо слишком сложны, либо заметно снизят быстродействие игры. Вероятно, некоторые математические операции очень скоро будут встроены непосредственно в движок плеера, и необходимость в них отпадёт. Такие функции будут исключаться из последующих версий библиотеки. По возможности, алгоритмы будут упрощены и разгружены, а так же будут достраиваться необходимые для работы с функциями параметры.
      </p>
    </article>
            <aside class="e-block">
                <div class="avs-page-stamp" id="em_subscribe">
                    <p class="avs-empty">Aleks Versus'Easy Libraries'2013-<span class="subscribe_year">$YEAR$</span></p>
                    <p class="avs-aempty">Aleks Versus'Game Adventure Making'Really Unimaginable Stories'2013-<span class="subscribe_year">$YEAR$</span></p>
                </div>
            </aside>
        </div>
    </div>
    <div class="em-stick-upper"><a class="avs-page-external-link" href="#UP" title="Вверх"><img class="em-stick-upper__image" src="../res/img/uparrow_btn.png" /></a></div>
</body>

</html>